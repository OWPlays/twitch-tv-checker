<?php

// Made a simple script to check if twitch is live or not without a bunch of coding or api.
// ========How it Works=========
// It reads the sites html and looks for a simple line that is in every stream when they are live.
// You can change it to work how you need it to. But for this way just 2ndopt.php?who=...stream channel...
// Any questions, email me at: grayson.crofts@gmail.com

$i=0;

$checkwho=$_GET['who'];

if (!empty($checkwho)) {

$check=curl_init('https://www.twitch.tv/' . $checkwho);
curl_setopt($check, CURLOPT_RETURNTRANSFER, true);
$check = curl_exec($check);
$checkfor='/live_user_';
$check=str_replace($checkfor, $checkfor, $check, $i);
if ( $i > 0) {
    //if online say online (or give it a command to do)
    echo "online";
 } else {
     //if online say offline (or give it a command to do)
    echo "offline";
}

curl_close($check);

} else {
echo "no stream channel, 2ndopt.php?who=...channel name...";
}


?>
